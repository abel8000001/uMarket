<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="uMarket.Pages.LoginPage"
             Title="Iniciar Sesión"
             BackgroundColor="#121223"
             Padding="0">

    <Grid RowDefinitions="240, *">

        <!-- Header -->
        <Grid Grid.Row="0">
            <VerticalStackLayout Padding="80" Spacing="6" VerticalOptions="End" HorizontalOptions="Fill">
                <Label Text="Iniciar Sesión"
                    FontSize="26"
                    FontAttributes="Bold"
                    TextColor="{StaticResource White}"
                    HorizontalOptions="Center" />
                <Label Text="Inicia sesión con tu cuenta institucional"
                    FontSize="14"
                    TextColor="{StaticResource White}"
                    HorizontalOptions="Center" />
            </VerticalStackLayout>
        </Grid>

        <!-- Login Card -->
        <Border Grid.Row="1"
            Background="{StaticResource White}"
            StrokeThickness="0"
            StrokeShape="RoundRectangle 24,24,0,0"
            Padding="40"
            VerticalOptions="Fill">
            <ScrollView Grid.Row="1" VerticalOptions="Fill" VerticalScrollBarVisibility="Never" HorizontalScrollBarVisibility="Never">
                <VerticalStackLayout Spacing="14">

                    <!-- ID -->
                    <Label Text="ID"
                    FontSize="12"
                    TextColor="{StaticResource Gray500}" />

                    <Border Background="{StaticResource Gray100}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 10"
                    Padding="8"
                    HorizontalOptions="Fill">
                        <Entry x:Name="UsernameEntry"
                        Placeholder="000123456"
                        Keyboard="Plain"
                        HorizontalOptions="Fill" />
                    </Border>

                    <!-- Password -->
                    <Label Text="CONTRASEÑA"
                    FontSize="12"
                    TextColor="{StaticResource Gray500}" />

                    <Border Background="{StaticResource Gray100}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 10"
                    Padding="8"
                    HorizontalOptions="Fill">
                        <Grid Padding="0" VerticalOptions="Center" HeightRequest="44">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="48" />
                            </Grid.ColumnDefinitions>

                            <Entry x:Name="PasswordEntry"
                            Grid.Column="0"
                            Placeholder="••••••••"
                            Keyboard="Plain"
                            IsPassword="True"
                            HorizontalOptions="Fill" />

                            <Image Grid.Column="1"
                            x:Name="PasswordToggleButton"
                            Source="eye_hidden.svg"
                            WidthRequest="20"
                            HeightRequest="20"
                            Aspect="AspectFit"
                            HorizontalOptions="Center"
                            VerticalOptions="Center"
                            Margin="0">
                                <Image.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="PasswordToggleButton_Clicked" NumberOfTapsRequired="1" />
                                </Image.GestureRecognizers>
                            </Image>
                        </Grid>
                    </Border>

                    <!-- Remember + error -->
                    <HorizontalStackLayout Spacing="12" VerticalOptions="Center" HorizontalOptions="Start">
                        <CheckBox x:Name="RememberCheck" VerticalOptions="Center" />
                        <Label Text="Recuérdame"
                        VerticalOptions="Center"
                        TextColor="{StaticResource Gray500}" />
                    </HorizontalStackLayout>

                    <Label x:Name="ErrorLabel"
                    TextColor="{StaticResource Magenta}"
                    IsVisible="False"
                    FontSize="12" />

                    <!-- Login button + activity indicator -->
                    <VerticalStackLayout Spacing="8">
                        <Button x:Name="LoginButton"
                        Text="INICIAR SESIÓN"
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="{StaticResource White}"
                        HeightRequest="48"
                        CornerRadius="10"
                        Clicked="LoginButton_Clicked"
                        HorizontalOptions="Fill" />

                        <Button x:Name="GoToRegisterButton"
                        Text="CREAR CUENTA"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource Primary}"
                        HeightRequest="44"
                        CornerRadius="8"
                        Clicked="GoToRegisterButton_Clicked"
                        HorizontalOptions="Fill" />

                        <ActivityIndicator x:Name="LoadingIndicator"
                        IsVisible="False"
                        IsRunning="False"
                        VerticalOptions="Center"
                        HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </ScrollView>
        </Border>
    </Grid>
</ContentPage>